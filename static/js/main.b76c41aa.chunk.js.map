{"version":3,"sources":["KillShip/Battlefield/Battlefield.jsx","KillShip/state/cellstate.js","KillShip/HeaderWithCounter.jsx","KillShip/ResetButton.jsx","KillShip/Game/utils/array.js","KillShip/Game/utils/random.js","KillShip/Game/utils/buttlefield.js","KillShip/state/useGameState.jsx","KillShip/Game/Game.jsx","KillShip/KillShip.jsx","App.js","index.js","KillShip/Battlefield/Battlefield.module.css","KillShip/KillShip.module.css"],"names":["cellStateMap","_cellStateMap","Object","defineProperty","Cell","_ref","handleClick","value","y","x","react_default","a","createElement","className","styles","cell","onClick","Battlefield","_ref2","matrix","onFire","battlefield","map","line","lineNumber","field","key","v","i","Battlefield_Cell","concat","HeaderWithCounter","turn","ResetButton","reset","type","createArray","length","callback","toConsumableArray","Array","_","random","min","max","Math","floor","createHorizontalWarship","maxSize","maxY","headX","headY","createVerticalWarship","createBattlefield","shipLength","emptyBattlefield","forEach","Game","_useGameState","_useState","useState","won","_useState2","slicedToArray","state","setState","fire","newState","every","objectSpread","useGameState","KillShip_HeaderWithCounter","KillShip_Battlefield_Battlefield","KillShip_ResetButton","TXT","KillShip","text","n","setText","React","useEffect","timeoutId","setTimeout","dots","fill","join","clearTimeout","useMagic","killShip","KillShip_Game_Game","App","src_KillShip_KillShip","ReactDOM","createRoot","document","getElementById","render","StrictMode","src_App","module","exports"],"mappings":"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","file":"static/js/main.b76c41aa.chunk.js","sourcesContent":["import React from \"react\";\r\nimport { CHECKED_SHIP, CHECKED_WATER, SHIP, WATER } from \"../state/cellstate\";\r\nimport styles from \"./Battlefield.module.css\";\r\n\r\nconst cellStateMap = {\r\n  [WATER]: \"\",\r\n  [SHIP]: \"\",\r\n  [CHECKED_WATER]: \"🌊\",\r\n  [CHECKED_SHIP]: \"🔥\",\r\n};\r\n\r\nconst Cell = ({ handleClick, value, y, x }) => {\r\n  // console.log('render');\r\n  return (\r\n    <button className={styles.cell} onClick={() => handleClick(y, x)}>\r\n      {cellStateMap[value]}\r\n    </button>\r\n  );\r\n};\r\n\r\nconst Battlefield = ({ matrix, onFire }) => {\r\n  return (\r\n    <div className={styles.battlefield}>\r\n      {matrix.map((line, lineNumber) => (\r\n        <div className={styles.field} key={lineNumber}>\r\n          {line.map((v, i) => (\r\n            <Cell\r\n              key={`${lineNumber}${i}`}\r\n              value={v}\r\n              y={lineNumber}\r\n              x={i}\r\n              handleClick={onFire}\r\n            />\r\n          ))}\r\n        </div>\r\n      ))}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Battlefield;\r\n","export const WATER = 0\r\nexport const SHIP = 1\r\nexport const CHECKED_WATER = 2\r\nexport const CHECKED_SHIP = 3","import React from 'react'\r\n\r\nconst HeaderWithCounter = ({turn}) => <h2>{turn}</h2>\r\n\r\nexport default HeaderWithCounter","import React from 'react'\r\n\r\nconst ResetButton = ({reset}) => {\r\n    return <button type='button' onClick={reset}>Reset</button>\r\n}\r\n\r\nexport default ResetButton","export const createArray = (length, callback) => {\r\n    return [...new Array(length)].map((_, i) => callback(i))\r\n}","export function random(min, max) {\r\n    return Math.floor(Math.random() * (max-min) + min)\r\n}","import { random } from \"./random\"\r\nimport { createArray } from \"./array\"\r\n\r\nexport const createWarShip = (shipLength, maxSize) => {\r\n    const position = random(0,2) % 2 === 0 ? 'horizontal' : 'vertical'\r\n    return position === 'horizontal' \r\n        ? createHorizontalWarship(shipLength, maxSize) \r\n        : createVerticalWarship(shipLength, maxSize)\r\n}\r\n\r\nexport const createHorizontalWarship = (length, maxSize) => {\r\n    const maxX = maxSize - length;\r\n    const maxY = maxSize;\r\n\r\n    const headX = random(0, maxX)\r\n    const headY = random(0, maxY)\r\n\r\n    return createArray(length, (i) => {\r\n        return {y: headY, x: headX + i}\r\n    })\r\n}\r\n\r\nexport const createVerticalWarship = (length, maxSize) => {\r\n    const maxX = maxSize;\r\n    const maxY = maxSize - length;\r\n\r\n    const headX = random(0, maxX)\r\n    const headY = random(0, maxY)\r\n\r\n    return createArray(length, (i) => {\r\n        return {y: headY + i, x: headX}\r\n    })\r\n}","import { useState } from \"react\";\r\nimport { createArray } from \"../Game/utils/array\";\r\nimport { createWarShip } from \"../Game/utils/buttlefield\";\r\nimport { CHECKED_SHIP, CHECKED_WATER, SHIP, WATER } from \"./cellstate\";\r\n\r\nconst MAX_MATRIX_LENGTH = 10\r\n\r\nconst createEmptyBattlefield = () => createArray(MAX_MATRIX_LENGTH, () => createArray(MAX_MATRIX_LENGTH, () => 0))\r\n\r\nconst createBattlefield = () => {\r\n    const emptyBattlefield = createEmptyBattlefield()\r\n    const newWarShip = createWarShip(4, MAX_MATRIX_LENGTH)\r\n\r\n    newWarShip.forEach(({x, y}) => {\r\n        emptyBattlefield[y][x] = SHIP\r\n    });\r\n    return emptyBattlefield\r\n}\r\n\r\nexport const useGameState = () => {\r\n    const [state, setState] = useState({\r\n        matrix: createBattlefield(),\r\n        turn: 0,\r\n        won: false\r\n    })\r\n    const reset = () => {\r\n        setState({\r\n            matrix: createBattlefield(),\r\n            turn: 0,\r\n            won: false\r\n        })\r\n    };\r\n\r\n    const fire = (y, x) => {\r\n        const cell = state.matrix[y][x]\r\n        if (cell === CHECKED_WATER || cell === CHECKED_SHIP) {\r\n            return\r\n        }\r\n        const newState = cell === WATER ? CHECKED_WATER : CHECKED_SHIP\r\n        state.matrix[y][x] = newState\r\n        const won = state.matrix.every(line => line.every(x => x !== SHIP))\r\n\r\n        setState({...state, turn: state.turn + 1, won})\r\n    }\r\n\r\n    const {turn, matrix, won} = state;\r\n    return {turn, reset, matrix, fire, won}\r\n}","import React from 'react';\r\nimport Battlefield from '../Battlefield/Battlefield';\r\nimport HeaderWithCounter from '../HeaderWithCounter';\r\nimport ResetButton from '../ResetButton';\r\nimport { useGameState } from '../state/useGameState';\r\n\r\n\r\nconst Game = () => {\r\n  const {turn, reset, matrix, fire, won} = useGameState()\r\n\r\n  const onFire = (y, x) => console.log(y, x);\r\n  return (\r\n    <div>\r\n        {won && <h1> Вітаю! Ви втопили москву 😎💪</h1>}\r\n        <HeaderWithCounter turn={turn} />\r\n        <Battlefield matrix={matrix} onFire={fire}/>\r\n        <ResetButton reset={reset}/>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Game","import React from 'react'\r\nimport { useState } from 'react'\r\nimport styles from '../KillShip/KillShip.module.css'\r\nimport Game from './Game/Game.jsx'\r\n\r\n\r\nconst TXT = 'Потрібно потопити корабель МОСКВА!'\r\nconst useMagic = () => {\r\n  const [state, setText] = useState({\r\n    n: 1,\r\n    text: TXT,\r\n  });\r\n\r\n  React.useEffect(() => {\r\n    const timeoutId = setTimeout(() => {\r\n      const dots = new Array(state.n).fill('🔥').join('')\r\n      const n = state.n > 2 ? 1 : state.n + 1\r\n      setText({n, text:`${TXT}${dots}`})\r\n    }, 1000)\r\n    return () => clearTimeout(timeoutId)\r\n  }, [state])\r\n  \r\n  return state.text \r\n}\r\n\r\nconst KillShip = () => {\r\n  const text = useMagic()\r\n  return (\r\n    <div className={styles.killShip}>\r\n        {text}\r\n        <Game />\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default KillShip","import React from 'react'\nimport KillShip from './KillShip/KillShip';\n\nfunction App() {\n  return (\n    <div className=\"App\">\n        <KillShip />\n    </div>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom/client';\nimport App from './App';\n\nconst root = ReactDOM.createRoot(document.getElementById('root'));\nroot.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>\n);\n\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"battlefield\":\"Battlefield_battlefield__2bKlV\",\"field\":\"Battlefield_field__lZTJG\",\"cell\":\"Battlefield_cell__23BMt\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"killShip\":\"KillShip_killShip__EqFWn\"};"],"sourceRoot":""}